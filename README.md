![tygor banner](doc/banner-generator/tygor-banner.svg)
[![Go Reference](https://pkg.go.dev/badge/github.com/broady/tygor.svg)](https://pkg.go.dev/github.com/broady/tygor) [![NPM](https://img.shields.io/npm/v/%40tygor%2Fclient?style=flat&logo=ts-node&logoColor=white)](https://www.npmjs.com/package/@tygor/client)

# tygor

Type-safe Go backend for web apps.

Write Go functions, call them from TypeScript with full type safety. No IDL required.

## What it looks like

**Write Go types and handlers:**

<!-- [snippet:doc/examples/quickstart:types] -->
```go title="types.go"
type User struct {
	ID    int64  `json:"id"`
	Name  string `json:"name"`
	Email string `json:"email" validate:"required,email"`
}

type GetUserRequest struct {
	ID int64 `json:"id"`
}

type CreateUserRequest struct {
	Name  string `json:"name" validate:"required,min=2"`
	Email string `json:"email" validate:"required,email"`
}

```
<!-- [/snippet:doc/examples/quickstart:types] -->

<!-- [snippet:doc/examples/quickstart:handlers] -->
```go title="main.go"
func GetUser(ctx context.Context, req *GetUserRequest) (*User, error) {
	// ...
}

func CreateUser(ctx context.Context, req *CreateUserRequest) (*User, error) {
	// ...
}

```
<!-- [/snippet:doc/examples/quickstart:handlers] -->

**tygor generates TypeScript types:**

<!-- [snippet:doc/examples/quickstart:generated-types] -->
```typescript title="generated_types.ts"
// Code generated by tygor. DO NOT EDIT.
export interface User {
  id: number;
  name: string;
  email: string;
}
```
<!-- [/snippet:doc/examples/quickstart:generated-types] -->

**And Zod schemas from your validate tags:**

<!-- [snippet:doc/examples/quickstart:generated-zod] -->
```typescript title="generated_schemas.ts"
// Code generated by tygor. DO NOT EDIT.
import { z } from "zod";

export const UserSchema = z.object({
  id: z.number().int(),
  name: z.string(),
  email: z.string().min(1).email(), // validate:"required,email"
});
```
<!-- [/snippet:doc/examples/quickstart:generated-zod] -->

**Call your API with full type safety:**

<!-- [snippet:doc/examples/quickstart:client-call] -->
```typescript title="client_usage.ts"
const user = await client.Users.Get({ id: 123 });
// user: User (autocomplete works)
```
<!-- [/snippet:doc/examples/quickstart:client-call] -->

## Why tygor?

- **No IDL required.** Go structs are your schema. Or use [protobuf](./examples/protobuf) if you prefer schema-first.
- **Standard HTTP/JSON.** Debuggable with curl. Cacheable. Works with your existing infra.
- **Tiny client.** Proxy-based, <3KB. No per-endpoint generated code.
- **Go-native.** Works with `net/http`, your middleware, your patterns.

## Who is this for?

**Use tygor if you:**
- Build fullstack apps with Go backend + TypeScript frontend
- Work in a monorepo (or want types to stay in sync)
- Prefer iterating on code over maintaining schema files
- Would use tRPC if your backend was TypeScript

**Consider alternatives if you:**
- Need multi-language clients today → OpenAPI generators
- Need strict public API contracts → Connect/gRPC with protobuf

## Comparison

| | tygor | tRPC | Connect | gRPC-web |
|---|---|---|---|---|
| Backend language | **Go** | TypeScript | Any | Any |
| Schema | Optional | No | Protobuf | Protobuf |
| TypeScript types | Generated | Inferred | Generated | Generated |
| Transport | HTTP/JSON | HTTP/JSON | HTTP/JSON + gRPC | gRPC |

**tygor** is for Go teams who want tRPC-style ergonomics.

## Installation

```bash
# Go
go get github.com/broady/tygor

# TypeScript
npm install @tygor/client
```

## Quick Start

### 1. Register handlers

<!-- [snippet:doc/examples/quickstart:registration] -->
```go title="main.go"
app := tygor.NewApp()

users := app.Service("Users")
users.Register("Get", tygor.Query(GetUser))      // GET request
users.Register("Create", tygor.Exec(CreateUser)) // POST request

http.ListenAndServe(":8080", app.Handler())
```
<!-- [/snippet:doc/examples/quickstart:registration] -->

### 2. Generate TypeScript

<!-- [snippet:doc/examples/quickstart:generation] -->
```go title="main.go"
tygorgen.FromApp(app).ToDir("./client/src/rpc")
```
<!-- [/snippet:doc/examples/quickstart:generation] -->

### 3. Call from TypeScript

<!-- [snippet:doc/examples/quickstart:client-usage] -->
```typescript title="client_usage.ts"
import { createClient } from "@tygor/client";
import type { Manifest } from "./rpc/manifest";

const client = createClient<Manifest>("http://localhost:8080");

const user = await client.Users.Get({ id: "123" });
```
<!-- [/snippet:doc/examples/quickstart:client-usage] -->

## Try it

| Example | Description |
|---------|-------------|
| [react](./examples/react) | React + Vite starter with type-safe API calls |
| [zod](./examples/zod) | Client-side validation from Go validate tags |
| [newsserver](./examples/newsserver) | Simple CRUD API to explore the basics |

See [all examples](./examples) including auth, protobuf, and more.

## Features

### Validation

Server-side validation with `validator/v10`, client-side with generated Zod schemas:

<!-- snippet-ignore -->
```go
type CreateUserRequest struct {
    Name  string `json:"name" validate:"required,min=2"`
    Email string `json:"email" validate:"required,email"`
}
```

See [examples/zod](./examples/zod) for client-side validation.

### Caching

Cache control for GET endpoints:

<!-- snippet-ignore -->
```go
users.Register("Get", tygor.Query(GetUser).
    CacheControl(tygor.CacheConfig{MaxAge: 5 * time.Minute, Public: true}))
```

### Interceptors

Cross-cutting concerns at app, service, or handler level:

<!-- snippet-ignore -->
```go
app.WithUnaryInterceptor(loggingInterceptor)
service.WithUnaryInterceptor(authInterceptor)
handler.WithUnaryInterceptor(auditInterceptor)
```

### Error Handling

Structured error codes that map to HTTP status:

<!-- snippet-ignore -->
```go
return nil, tygor.NewError(tygor.CodeNotFound, "user not found")
// → HTTP 404, JSON: {"code": "not_found", "message": "user not found"}
```

### Middleware

Standard HTTP middleware:

<!-- snippet-ignore -->
```go
app.WithMiddleware(middleware.CORS(middleware.CORSAllowAll))
```

## Status

> [!IMPORTANT]
> tygor is pre-release. The API and protocol may change.
> Pin `@tygor/client` and `github.com/broady/tygor` to the same version.

## License

MIT

Tiger image by Yan Liu, licensed under CC-BY.
